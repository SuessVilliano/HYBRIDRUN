<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hybrid Runner - Powered by LIV8</title>
    <style>
        /* Styles remain the same */
    </style>
</head>
<body>
    <!-- HTML structure remains largely the same, but remove the victoryScreen div -->
    <!-- Update the instructions in the welcomeScreen -->
    <div id="welcomeScreen">
        <h1>Welcome to Hybrid Runner</h1>
        <p>Jump over obstacles and collect neon orbs to score points!</p>
        <p>Instructions:</p>
        <ul style="text-align: left;">
            <li>Use SPACEBAR or TAP to jump</li>
            <li>Hold longer for higher jumps</li>
            <li>Avoid red obstacles</li>
            <li>Collect yellow coins for points</li>
            <li>Aim for the highest score!</li>
        </ul>
        <select id="difficultySelect">
            <option value="easy">Easy</option>
            <option value="medium">Medium</option>
            <option value="hard">Hard</option>
        </select>
        <button id="startButton">Start Game</button>
    </div>

    <script>
        // Existing variable declarations
        let isJumping = false;
        let jumpStartTime = 0;
        const MAX_JUMP_DURATION = 500; // milliseconds

        function initGame() {
            const difficulty = difficultySelect.value;
            player = {
                x: 50,
                y: canvas.height - 150,
                width: 40,
                height: 40,
                dy: 0,
                jumpPower: -15,
                gravity: 0.6,
                grounded: false
            };
            obstacles = [];
            coins = [];
            score = 0;

            switch(difficulty) {
                case 'easy':
                    gameSpeed = 5;
                    break;
                case 'medium':
                    gameSpeed = 7;
                    break;
                case 'hard':
                    gameSpeed = 9;
                    break;
            }
        }

        function startGame() {
            welcomeScreen.style.display = 'none';
            gameOverScreen.style.display = 'none';
            gameActive = true;
            initGame();
            gameLoop();
        }

        function handleJumpStart(event) {
            if ((event.type === 'keydown' && event.code === 'Space') || 
                (event.type === 'touchstart')) {
                if (player.grounded && gameActive) {
                    isJumping = true;
                    jumpStartTime = Date.now();
                }
            }
        }

        function handleJumpEnd(event) {
            if ((event.type === 'keyup' && event.code === 'Space') || 
                (event.type === 'touchend')) {
                isJumping = false;
            }
        }

        document.addEventListener('keydown', handleJumpStart);
        document.addEventListener('keyup', handleJumpEnd);
        canvas.addEventListener('touchstart', handleJumpStart);
        canvas.addEventListener('touchend', handleJumpEnd);

        function update() {
            if (isJumping) {
                const jumpDuration = Date.now() - jumpStartTime;
                const jumpForce = Math.min(jumpDuration / MAX_JUMP_DURATION, 1) * player.jumpPower;
                player.dy = jumpForce;
            } else {
                player.dy += player.gravity;
            }

            player.y += player.dy;

            if (player.y + player.height > canvas.height - 50) {
                player.y = canvas.height - player.height - 50;
                player.dy = 0;
                player.grounded = true;
            }

            // Rest of the update logic remains the same
            // Remove the victory condition check

            gameSpeed += 0.001;
        }

        function gameOver() {
            gameActive = false;
            gameOverScreen.style.display = 'block';
            document.getElementById('finalScore').textContent = score;
        }

        submitScoreButton.addEventListener('click', function() {
            const playerName = document.getElementById('playerName').value || 'Anonymous';
            leaderboard.push({name: playerName, score: score});
            leaderboard.sort((a, b) => b.score - a.score);
            leaderboard = leaderboard.slice(0, 5);
            updateLeaderboard();
            gameOverScreen.style.display = 'none';
            welcomeScreen.style.display = 'block';
        });

        restartButton.addEventListener('click', function() {
            gameOverScreen.style.display = 'none';
            welcomeScreen.style.display = 'block';
        });

        // Show welcome screen on load
        welcomeScreen.style.display = 'block';
    </script>
</body>
</html>
